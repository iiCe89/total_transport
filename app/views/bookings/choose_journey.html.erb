<div class="card-cont">
  <% @route.available_journeys_by_date.each_pair do |date, journeys| %>
    <div class="date">
      <h3><%= friendly_date date %>:</h3>
    </div>
    <% journeys.each do |journey| %>
      <div class="card">
        <div class="inner">
          <div class="left">
            <span class="timeEst"><%= padded_time @booking.pickup_stop.time_for_journey(journey) %></span><br/>
            <span class="pickUp"><%= @booking.pickup_stop.name %></span>
          </div>
          <div class="midArw"><i class="fa fa-arrow-right"></i></div>
          <div class="right">
            <span class="timeEst"><%= padded_time @booking.dropoff_stop.time_for_journey(journey) %></span><br/>
            <span class="dropOff"><%= @booking.dropoff_stop.name %></span>
          </div>
        </div>
        <div id="confirmation">
          <% if journey.full? %>
            <p class="cardBtn">Fully booked<p>
          <% else %>
            <%= form_for [@route, @booking], url: save_journey_route_booking_path(@route, @booking) do |form| %>
              <%= form.hidden_field :journey_id, value: journey.id %>
              <%= form.submit 'Define Pick Up Point', :class => 'cardBtn' %>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
  <% end %>
</div>

<%= link_to "suggest a new time", suggest_journey_route_booking_path(@route, @booking) %>
